import{r as w,b as je,N as ve,u as be,c as Ne,d as L,R as we,B as ke}from"./react-bc3480f6.js";import{c as Q,u as k,a as Se,Q as _e,b as Ce}from"./data-77790993.js";import{X as Pe,M as Re,T as R,S as Te,a as Ee,b as J,A as U,H as De,B as z,W as ae,c as re,d as B,e as $e,f as Le,L as Fe,D as ie,P as Ie,g as Ae,z as T,C as ne,R as le,h as Oe,V as Me,n as M,F as Ue}from"./ui-7e9ce421.js";import{C as ce,d as oe,L as de,P as ze,e as Be,p as xe,f as me,g as he,i as Ve,h as He,T as We,j as qe,k as Ge,l as Qe}from"./charts-66929110.js";import"./dates-f57bbedb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();var ge={exports:{}},V={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Je=w,Ke=Symbol.for("react.element"),Ye=Symbol.for("react.fragment"),Xe=Object.prototype.hasOwnProperty,Ze=Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,et={key:!0,ref:!0,__self:!0,__source:!0};function ue(a,t,s){var i,r={},n=null,c=null;s!==void 0&&(n=""+s),t.key!==void 0&&(n=""+t.key),t.ref!==void 0&&(c=t.ref);for(i in t)Xe.call(t,i)&&!et.hasOwnProperty(i)&&(r[i]=t[i]);if(a&&a.defaultProps)for(i in t=a.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:Ke,type:a,key:n,ref:c,props:r,_owner:Ze.current}}V.Fragment=Ye;V.jsx=ue;V.jsxs=ue;ge.exports=V;var e=ge.exports,H={},Z=je;H.createRoot=Z.createRoot,H.hydrateRoot=Z.hydrateRoot;var pe={exports:{}};pe.exports={ReactQueryDevtools:function(){return null},ReactQueryDevtoolsPanel:function(){return null}};var tt=pe.exports;function st(a,t){let s;try{s=a()}catch{return}return{getItem:r=>{var n;const c=l=>l===null?null:JSON.parse(l,t==null?void 0:t.reviver),o=(n=s.getItem(r))!=null?n:null;return o instanceof Promise?o.then(c):c(o)},setItem:(r,n)=>s.setItem(r,JSON.stringify(n,t==null?void 0:t.replacer)),removeItem:r=>s.removeItem(r)}}const A=a=>t=>{try{const s=a(t);return s instanceof Promise?s:{then(i){return A(i)(s)},catch(i){return this}}}catch(s){return{then(i){return this},catch(i){return A(i)(s)}}}},at=(a,t)=>(s,i,r)=>{let n={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:p=>p,version:0,merge:(p,N)=>({...N,...p}),...t},c=!1;const o=new Set,l=new Set;let d;try{d=n.getStorage()}catch{}if(!d)return a((...p)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...p)},i,r);const m=A(n.serialize),h=()=>{const p=n.partialize({...i()});let N;const g=m({state:p,version:n.version}).then(x=>d.setItem(n.name,x)).catch(x=>{N=x});if(N)throw N;return g},b=r.setState;r.setState=(p,N)=>{b(p,N),h()};const v=a((...p)=>{s(...p),h()},i,r);let _;const y=()=>{var p;if(!d)return;c=!1,o.forEach(g=>g(i()));const N=((p=n.onRehydrateStorage)==null?void 0:p.call(n,i()))||void 0;return A(d.getItem.bind(d))(n.name).then(g=>{if(g)return n.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==n.version){if(n.migrate)return n.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var x;return _=n.merge(g,(x=i())!=null?x:v),s(_,!0),h()}).then(()=>{N==null||N(_,void 0),c=!0,l.forEach(g=>g(_))}).catch(g=>{N==null||N(void 0,g)})};return r.persist={setOptions:p=>{n={...n,...p},p.getStorage&&(d=p.getStorage())},clearStorage:()=>{d==null||d.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>y(),hasHydrated:()=>c,onHydrate:p=>(o.add(p),()=>{o.delete(p)}),onFinishHydration:p=>(l.add(p),()=>{l.delete(p)})},y(),_||v},rt=(a,t)=>(s,i,r)=>{let n={storage:st(()=>localStorage),partialize:y=>y,version:0,merge:(y,p)=>({...p,...y}),...t},c=!1;const o=new Set,l=new Set;let d=n.storage;if(!d)return a((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${n.name}', the given storage is currently unavailable.`),s(...y)},i,r);const m=()=>{const y=n.partialize({...i()});return d.setItem(n.name,{state:y,version:n.version})},h=r.setState;r.setState=(y,p)=>{h(y,p),m()};const b=a((...y)=>{s(...y),m()},i,r);r.getInitialState=()=>b;let v;const _=()=>{var y,p;if(!d)return;c=!1,o.forEach(g=>{var x;return g((x=i())!=null?x:b)});const N=((p=n.onRehydrateStorage)==null?void 0:p.call(n,(y=i())!=null?y:b))||void 0;return A(d.getItem.bind(d))(n.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==n.version){if(n.migrate)return[!0,n.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var x;const[j,P]=g;if(v=n.merge(P,(x=i())!=null?x:b),s(v,!0),j)return m()}).then(()=>{N==null||N(v,void 0),v=i(),c=!0,l.forEach(g=>g(v))}).catch(g=>{N==null||N(void 0,g)})};return r.persist={setOptions:y=>{n={...n,...y},y.storage&&(d=y.storage)},clearStorage:()=>{d==null||d.removeItem(n.name)},getOptions:()=>n,rehydrate:()=>_(),hasHydrated:()=>c,onHydrate:y=>(o.add(y),()=>{o.delete(y)}),onFinishHydration:y=>(l.add(y),()=>{l.delete(y)})},n.skipHydration||_(),v||b},it=(a,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?at(a,t):rt(a,t),K=it,O=Q()(K(a=>({sidebarOpen:!0,darkMode:!1,selectedPortfolio:null,activeStrategy:null,toggleSidebar:()=>a(t=>({sidebarOpen:!t.sidebarOpen})),setSidebarOpen:t=>a({sidebarOpen:t}),toggleDarkMode:()=>a(t=>({darkMode:!t.darkMode})),setSelectedPortfolio:t=>a({selectedPortfolio:t}),setActiveStrategy:t=>a({activeStrategy:t})}),{name:"turtle-app-store",partialize:a=>({darkMode:a.darkMode,selectedPortfolio:a.selectedPortfolio,activeStrategy:a.activeStrategy})})),nt=Q()(K(a=>({selectedSymbol:null,selectedInterval:"1d",selectedChartFile:null,setSelectedSymbol:t=>a({selectedSymbol:t}),setSelectedInterval:t=>a({selectedInterval:t}),setSelectedChartFile:t=>a({selectedChartFile:t})}),{name:"turtle-chart-store"})),lt=Q()(K(a=>({autoTradingEnabled:!1,selectedStrategy:null,riskPerTrade:.02,setAutoTradingEnabled:t=>a({autoTradingEnabled:t}),setSelectedStrategy:t=>a({selectedStrategy:t}),setRiskPerTrade:t=>a({riskPerTrade:t})}),{name:"turtle-trading-store"}));function ct(){const{sidebarOpen:a,toggleSidebar:t,darkMode:s,toggleDarkMode:i}=O();return e.jsxs("nav",{className:"bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 h-16 flex items-center justify-between px-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:t,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:a?e.jsx(Pe,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"}):e.jsx(Re,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"h-8 w-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Turtle Trading Bot"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Advanced Trading Strategy Platform"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:s?"Switch to light mode":"Switch to dark mode",children:s?e.jsx(Te,{className:"h-5 w-5 text-yellow-500"}):e.jsx(Ee,{className:"h-5 w-5 text-gray-600"})}),e.jsx("button",{className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:e.jsx(J,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Connected"})]})]})]})}const ot=[{to:"/",label:"Dashboard",icon:De},{to:"/charts",label:"Charts",icon:z},{to:"/trading",label:"Trading",icon:R},{to:"/portfolio",label:"Portfolio",icon:ae},{to:"/strategies",label:"Strategies",icon:re},{to:"/settings",label:"Settings",icon:J}];function dt({isOpen:a}){return e.jsx("aside",{className:`fixed left-0 top-16 h-[calc(100vh-64px)] bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-700 transition-all duration-300 z-40 ${a?"w-64":"w-16"}`,children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("nav",{className:"flex-1 px-3 py-4 space-y-2",children:ot.map(t=>{const s=t.icon;return e.jsxs(ve,{to:t.to,className:({isActive:i})=>`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-colors ${i?"bg-primary-100 text-primary-700 dark:bg-primary-900 dark:text-primary-300":"text-gray-600 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-800"}`,children:[e.jsx(s,{className:`h-5 w-5 ${a?"mr-3":""}`}),a&&e.jsx("span",{children:t.label})]},t.to)})}),a&&e.jsx("div",{className:"p-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(U,{className:"h-4 w-4 text-green-500"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-900 dark:text-white",children:"System Status"}),e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400",children:"All systems operational"})]})]})})]})})}function E({title:a,value:t,subtitle:s,change:i,changeType:r="percentage",icon:n,className:c="",valueColor:o="neutral"}){const l=()=>{switch(o){case"positive":return"text-success-600 dark:text-success-400";case"negative":return"text-danger-600 dark:text-danger-400";default:return"text-gray-900 dark:text-white"}},d=()=>i===void 0?"":i>=0?"text-success-600 dark:text-success-400":"text-danger-600 dark:text-danger-400",m=()=>{if(i===void 0)return null;const h=i>=0?"+":"",b=r==="percentage"?"%":"";return e.jsxs("div",{className:`flex items-center space-x-1 ${d()}`,children:[i>=0?e.jsx(R,{className:"h-3 w-3"}):e.jsx(B,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-xs font-medium",children:[h,Math.abs(i).toFixed(2),b]})]})};return e.jsx("div",{className:`metric-card ${c}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[n&&e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:n}),e.jsx("p",{className:"metric-label",children:a})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("p",{className:`metric-value ${l()}`,children:typeof t=="number"?t.toLocaleString():t}),s&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:s})]})]}),i!==void 0&&e.jsx("div",{className:"ml-2",children:m()})]})})}function ye({summary:a}){const t=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(i),s=i=>`${i>=0?"+":""}${i.toFixed(2)}%`;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsx(E,{title:"Portfolio Balance",value:t(a.current_balance),subtitle:"Available cash",icon:e.jsx(ae,{className:"h-4 w-4"}),valueColor:"neutral"}),e.jsx(E,{title:"Total Equity",value:t(a.equity),subtitle:"Cash + unrealized P&L",change:a.return_percentage,changeType:"percentage",valueColor:a.equity>=a.current_balance?"positive":"negative",icon:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(E,{title:"Total P&L",value:t(a.total_pnl),subtitle:`Realized: ${t(a.realized_pnl)}`,valueColor:a.total_pnl>=0?"positive":"negative",icon:e.jsx($e,{className:"h-4 w-4"})}),e.jsx(E,{title:"Open Trades",value:a.open_trades,subtitle:`Total: ${a.total_trades}`,icon:e.jsx(U,{className:"h-4 w-4"})}),e.jsx(E,{title:"Win Rate",value:s(a.win_rate),subtitle:`Max DD: ${s(a.max_drawdown)}`,valueColor:a.win_rate>=50?"positive":"negative",icon:e.jsx(Le,{className:"h-4 w-4"})})]})}function f({children:a,className:t="",padding:s=!0}){return e.jsx("div",{className:`card ${s?"p-6":""} ${t}`,children:a})}function xt({children:a,className:t=""}){return e.jsx("div",{className:`card-header ${t}`,children:a})}function mt({children:a,className:t=""}){return e.jsx("div",{className:`card-content ${t}`,children:a})}function ht({children:a,className:t=""}){return e.jsx("div",{className:`px-6 py-4 border-t border-gray-200 dark:border-gray-700 ${t}`,children:a})}f.Header=xt;f.Content=mt;f.Footer=ht;function S({variant:a="primary",size:t="md",loading:s=!1,icon:i,children:r,className:n="",disabled:c,...o}){const l="inline-flex items-center justify-center font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",d={default:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",primary:"bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-500",secondary:"bg-gray-600 hover:bg-gray-700 text-white focus:ring-gray-500",success:"bg-green-600 hover:bg-green-700 text-white focus:ring-green-500",danger:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",destructive:"bg-red-600 hover:bg-red-700 text-white focus:ring-red-500",outline:"border border-gray-300 dark:border-gray-600 bg-transparent hover:bg-gray-50 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300",ghost:"bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"},m={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return e.jsx("button",{className:`${l} ${d[a]} ${m[t]} ${n}`,disabled:c||s,...o,children:s?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[i&&e.jsx("span",{className:"mr-2",children:i}),r]})})}const D=w.forwardRef(({label:a,error:t,helperText:s,className:i="",...r},n)=>e.jsxs("div",{className:"space-y-1",children:[a&&e.jsx("label",{className:"label",children:a}),e.jsx("input",{ref:n,className:`input ${t?"border-red-500 focus:ring-red-500":""} ${i}`,...r}),t&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t}),s&&!t&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s})]}));D.displayName="Input";const fe=w.forwardRef(({label:a,error:t,helperText:s,className:i="",children:r,...n},c)=>e.jsxs("div",{className:"space-y-1",children:[a&&e.jsx("label",{className:"label",children:a}),e.jsx("select",{ref:c,className:`select ${t?"border-red-500 focus:ring-red-500":""} ${i}`,...n,children:r}),t&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:t}),s&&!t&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s})]}));fe.displayName="Select";function gt({availableCharts:a}){const t=be(),{autoTradingEnabled:s,setAutoTradingEnabled:i}=lt(),[r,n]=w.useState(""),c=m=>m.replace(".json","").replace(/_/g," ").replace(/-/g," ").split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" "),o=()=>{if(!r){T.error("Please select a chart first");return}t("/trading")},l=()=>{if(!r){T.error("Please select a chart first");return}t("/charts")},d=()=>{i(!s),T.success(s?"Auto-trading disabled":"Auto-trading enabled")};return e.jsxs(f,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(fe,{label:"Select Chart",value:r,onChange:m=>n(m.target.value),children:[e.jsx("option",{value:"",children:"Choose a chart..."}),a.map(m=>e.jsx("option",{value:m,children:c(m)},m))]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(S,{variant:"primary",size:"sm",onClick:o,icon:e.jsx(R,{className:"h-4 w-4"}),disabled:!r,children:"Quick Trade"}),e.jsx(S,{variant:"outline",size:"sm",onClick:l,icon:e.jsx(z,{className:"h-4 w-4"}),disabled:!r,children:"View Chart"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:()=>t("/strategies"),icon:e.jsx(re,{className:"h-4 w-4"}),className:"w-full justify-start",children:"Manage Strategies"}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>t("/settings"),icon:e.jsx(ie,{className:"h-4 w-4"}),className:"w-full justify-start",children:"Download Data"})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Auto Trading"}),e.jsx("div",{className:`h-2 w-2 rounded-full ${s?"bg-green-500":"bg-gray-400"}`})]}),e.jsx(S,{variant:s?"danger":"success",size:"sm",onClick:d,icon:s?e.jsx(Ie,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"}),className:"w-full",children:s?"Disable Auto Trading":"Enable Auto Trading"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:s?"Automated trading is active based on strategy signals":"Manual trading mode - trades require confirmation"})]})]})]})}function ee({children:a,variant:t="primary",size:s="sm",className:i=""}){const r="inline-flex items-center font-medium rounded-full",n={primary:"bg-primary-100 text-primary-800 dark:bg-primary-900 dark:text-primary-300",secondary:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",success:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",warning:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",danger:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"},c={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm"};return e.jsx("span",{className:`${r} ${n[t]} ${c[s]} ${i}`,children:a})}function ut({trades:a,signals:t}){const s=l=>new Date(l).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),i=l=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(l),r=l=>l==="long"?e.jsx(R,{className:"h-4 w-4 text-green-500"}):e.jsx(B,{className:"h-4 w-4 text-red-500"}),n=l=>{switch(l){case"entry":return e.jsx(R,{className:"h-4 w-4 text-blue-500"});case"exit":return e.jsx(B,{className:"h-4 w-4 text-orange-500"});default:return e.jsx(U,{className:"h-4 w-4 text-gray-500"})}},c=l=>({open:"success",closed:"secondary",pending:"warning",cancelled:"danger"})[l]||"secondary",o=[...a.slice(0,5).map(l=>({id:l.id,type:"trade",timestamp:l.entry_time,data:l})),...t.slice(0,5).map(l=>({id:l.id,type:"signal",timestamp:l.timestamp,data:l}))].sort((l,d)=>new Date(d.timestamp).getTime()-new Date(l.timestamp).getTime()).slice(0,8);return e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Recent Activity"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(ne,{className:"h-4 w-4"}),e.jsx("span",{children:"Last 24 hours"})]})]}),o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(U,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No recent activity"})]}):e.jsx("div",{className:"space-y-3",children:o.map(l=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:l.type==="trade"?r(l.data.trade_type):n(l.data.signal_type)}),e.jsx("div",{className:"flex-1 min-w-0",children:l.type==="trade"?e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[l.data.trade_type.toUpperCase()," ",l.data.symbol]}),e.jsx(ee,{variant:c(l.data.status),children:l.data.status})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:i(l.data.entry_price)}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[l.data.quantity," units"]}),l.data.realized_pnl!==0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsx("span",{className:l.data.realized_pnl>=0?"text-green-600":"text-red-600",children:i(l.data.realized_pnl)})]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[l.data.signal_type.toUpperCase()," signal for ",l.data.symbol]}),e.jsxs(ee,{variant:"secondary",children:[(l.data.confidence*100).toFixed(0),"%"]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[l.data.reason," • ",i(l.data.price)]})]})}),e.jsx("div",{className:"flex-shrink-0 text-xs text-gray-400 dark:text-gray-500",children:s(l.timestamp)})]},`${l.type}-${l.id}`))})]})}ce.register(oe,de,ze,Be,xe,me,he,Ve);function pt({performance:a,timeRange:t}){const s={labels:a.dates,datasets:[{label:"Equity Curve",data:a.equity_curve,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:2,fill:!0,tension:.1,pointRadius:0,pointHoverRadius:4},{label:"Cumulative Returns",data:a.cumulative_returns.map(n=>n*100),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,fill:!1,tension:.1,pointRadius:0,pointHoverRadius:4,yAxisID:"percentage"}]},i={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:`Portfolio Performance - ${t.toUpperCase()}`,font:{size:16,weight:"bold"}},legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:n=>new Date(n[0].label).toLocaleDateString(),label:n=>{const c=n.dataset.label||"";return c==="Equity Curve"?`${c}: $${n.parsed.y.toLocaleString()}`:`${c}: ${n.parsed.y.toFixed(2)}%`}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Portfolio Value ($)"},ticks:{callback:function(n){return"$"+n.toLocaleString()}}},percentage:{type:"linear",display:!0,position:"right",title:{display:!0,text:"Cumulative Return (%)"},grid:{drawOnChartArea:!1},ticks:{callback:function(n){return n.toFixed(1)+"%"}}}}},r=(n,c=!1)=>c?`${n>=0?"+":""}${(n*100).toFixed(2)}%`:n.toFixed(2);return e.jsxs(f,{className:"p-6",children:[e.jsx("div",{className:"h-80 mb-6",children:e.jsx(He,{data:s,options:i})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r(a.sharpe_ratio)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Sharpe Ratio"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${a.max_drawdown<0?"text-red-600":"text-gray-900 dark:text-white"}`,children:r(a.max_drawdown,!0)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Max Drawdown"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r(a.volatility,!0)}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Volatility"})]})]})]})}const te=[{symbol:"BTCUSD",price:43250.5,change:1250.3,changePercent:2.98},{symbol:"ETHUSD",price:2680.75,change:-85.25,changePercent:-3.08},{symbol:"EURUSD",price:1.0895,change:.0012,changePercent:.11},{symbol:"GBPUSD",price:1.2734,change:-.0043,changePercent:-.34},{symbol:"USDJPY",price:149.82,change:.76,changePercent:.51}];function yt(){const[a,t]=w.useState(!1),{data:s=te,refetch:i}=k("marketOverview",()=>Promise.resolve(te),{refetchInterval:3e4,staleTime:15e3}),r=async()=>{t(!0),await i(),setTimeout(()=>t(!1),1e3)},n=(o,l)=>o.includes("USD")&&!o.startsWith("USD")?`$${l.toLocaleString()}`:o.startsWith("USD")?l.toFixed(2):l.toFixed(4),c=(o,l)=>{const d=o>=0?"+":"";return l.includes("USD")&&!l.startsWith("USD")?`${d}$${o.toFixed(2)}`:`${d}${o.toFixed(4)}`};return e.jsxs(f,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Market Overview"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:r,disabled:a,children:e.jsx(le,{className:`h-4 w-4 ${a?"animate-spin":""}`})})]}),e.jsx("div",{className:"space-y-3",children:s.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white text-sm",children:o.symbol}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:n(o.symbol,o.price)})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${o.change>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[o.change>=0?e.jsx(R,{className:"h-3 w-3"}):e.jsx(B,{className:"h-3 w-3"}),e.jsx("span",{children:c(o.change,o.symbol)})]}),e.jsxs("div",{className:`text-xs ${o.changePercent>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[o.changePercent>=0?"+":"",o.changePercent.toFixed(2),"%"]})]})]},o.symbol))}),e.jsx("div",{className:"mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"Live market data • Updates every 30s"]})})]})}const ft="http://localhost:8000",$=Se.create({baseURL:ft,timeout:3e4,headers:{"Content-Type":"application/json"}});$.interceptors.request.use(a=>{const t=localStorage.getItem("auth_token");return t&&(a.headers.Authorization=`Bearer ${t}`),a},a=>Promise.reject(a));$.interceptors.response.use(a=>a,a=>{var t,s,i,r,n,c;if(((t=a.response)==null?void 0:t.status)===401)localStorage.removeItem("auth_token"),T.error("Session expired. Please log in again.");else if(((s=a.response)==null?void 0:s.status)===403)T.error("Access denied");else if(((i=a.response)==null?void 0:i.status)===404)T.error("Resource not found");else if(((r=a.response)==null?void 0:r.status)===500)T.error("Server error. Please try again later.");else if(a.code==="NETWORK_ERROR")T.error("Network error. Please check your connection.");else{const o=((c=(n=a.response)==null?void 0:n.data)==null?void 0:c.detail)||a.message||"An error occurred";T.error(o)}return Promise.reject(a)});class u{static async get(t,s){return(await $.get(t,{params:s})).data}static async post(t,s,i){return(await $.post(t,s,i)).data}static async put(t,s){return(await $.put(t,s)).data}static async delete(t,s){return(await $.delete(t,s)).data}static async patch(t,s){return(await $.patch(t,s)).data}}class F{static async getPortfolios(){return u.get("/api/portfolio/list")}static async getPortfolioPositions(t){return u.get(`/api/portfolio/${t}/positions`)}static async getPortfolioPerformance(t){return u.get(`/api/portfolio/${t}/performance`)}static async createPortfolio(t){return u.post("/api/portfolio/create",t)}static async getPortfolio(t){return u.get(`/api/portfolio/${t}`)}static async updateBalance(t,s,i){const r={balance:s,reason:i};return u.put(`/api/portfolio/${t}/balance`,r)}static async addTrade(t,s){return u.post(`/api/portfolio/${t}/trade`,s)}static async getPortfolioTrades(t,s,i){const r={};return s&&(r.limit=s),i&&(r.offset=i),u.get(`/api/portfolio/${t}/trades`,r)}static async getPortfolioValue(t){return u.get(`/api/portfolio/${t}/value`)}static async getPerformance(t,s,i){const r={};return s&&(r.start_date=s),i&&(r.end_date=i),u.get(`/api/portfolio/${t}/performance`,r)}static async getDrawdown(t){return u.get(`/api/portfolio/${t}/drawdown`)}static async getRiskMetrics(t,s){const i=s?{benchmark:s}:{};return u.get(`/api/portfolio/${t}/risk-metrics`,i)}static async getRebalanceRecommendations(t,s){const i={target_weights:s};return u.post(`/api/portfolio/${t}/rebalance`,i)}static async deletePortfolio(t){return u.delete(`/api/portfolio/${t}`)}static async getPortfolioSummary(t){const[s,i,r]=await Promise.all([this.getPortfolio(t),this.getPortfolioValue(t),this.getPerformance(t)]);return{portfolio:s,value:i,performance:r,totalReturn:(i.total_value-s.initial_balance)/s.initial_balance*100}}static calculatePositionSize(t,s,i,r){const n=t*(s/100),c=Math.abs(i-r);return c===0?0:Math.floor(n/c)}}var W=(a=>(a.LONG="long",a.SHORT="short",a))(W||{}),q=(a=>(a.OPEN="open",a.CLOSED="closed",a.PENDING="pending",a.CANCELLED="cancelled",a))(q||{});class C{static async getStrategies(){return u.get("/api/trading/strategies")}static async getSignals(t,s=100){const i={limit:s};return t&&(i.symbol=t),u.get("/api/trading/signals",i)}static async getBacktestResults(t,s){const i={strategy_name:t};return s&&(i.symbol=s),u.get("/api/trading/backtest/results",i)}static async runBacktest(t){return u.post("/api/trading/backtest",t)}static async activateStrategy(t){return u.post("/api/trading/strategy/activate",{strategy_name:t})}static async deactivateStrategy(t){return u.post("/api/trading/strategy/deactivate",{strategy_name:t})}static async startAutoTrading(){return u.post("/api/trading/auto/start",{})}static async stopAutoTrading(){return u.post("/api/trading/auto/stop",{})}static async getTrades(t,s,i=100){const r={limit:i};return t&&t!=="all"&&(r.status=t),s&&(r.symbol=s),u.get("/api/trading/trades",r)}static async createTrade(t){return u.post("/api/trading/trade",t)}static async closeTrade(t,s){const i={trade_id:t};return s&&(i.exit_price=s),u.post("/api/trading/close",i)}static async getPositions(t){const s=t?{symbol:t}:{};return u.get("/api/trading/positions",s)}static async getPerformance(t,s,i){const r={};return t&&(r.symbol=t),s&&(r.start_date=s),i&&(r.end_date=i),u.get("/api/trading/performance",r)}static async checkStopsTargets(t){const s=t?{symbol:t}:{};return u.get("/api/trading/stops-targets",s)}static async calculatePosition(t,s,i,r,n){const c={symbol:t,entry_price:s,stop_loss:i,risk_amount:r,take_profit:n};return u.post("/api/trading/calculate-position",c)}static connectWebSocket(t){try{const s="ws://localhost:8000",i=new WebSocket(s);return i.onmessage=r=>{try{const n=JSON.parse(r.data);t(n)}catch(n){console.error("Error parsing WebSocket message:",n)}},i.onerror=r=>{console.error("WebSocket error:",r)},i.onclose=()=>{console.log("WebSocket connection closed")},i}catch(s){return console.error("Error creating WebSocket connection:",s),null}}static calculatePositionSize(t,s,i,r){const n=t*s,c=Math.abs(i-r);return c===0?0:Math.floor(n/c)}static calculatePnL(t,s){let i=0,r=0;return t.status===q.CLOSED&&t.exit_price?t.trade_type===W.LONG?i=(t.exit_price-t.entry_price)*t.quantity:i=(t.entry_price-t.exit_price)*t.quantity:t.status===q.OPEN&&s&&(t.trade_type===W.LONG?r=(s-t.entry_price)*t.quantity:r=(t.entry_price-s)*t.quantity),{realizedPnL:i,unrealizedPnL:r}}}class I{static async listChartFiles(){return u.get("/api/charts/files")}static async getChartData(t,s="1d",i=100,r){const n={symbol:t,interval:s,limit:i};return r&&r.length>0&&(n.indicators=r.join(",")),u.get("/api/charts/data",n)}static async getChartStats(t){return u.get(`/api/charts/stats/${t}`)}static async resampleChartData(t,s){return u.post("/api/charts/resample",{filename:t,interval:s})}static async getIndicators(t,s,i,r="1d"){const n={symbol:t,indicators:s,period:i,interval:r};return u.post("/api/charts/indicators",n)}static async getPatterns(t,s,i="1d"){const r={symbol:t,interval:i};return s&&s.length>0&&(r.pattern_types=s.join(",")),u.get("/api/charts/patterns",r)}static async getSupportResistance(t,s="1d",i=50){const r={symbol:t,interval:s,lookback_periods:i};return u.get("/api/charts/support-resistance",r)}static async getVolatility(t,s=20,i="1d"){const r={symbol:t,period:s,interval:i};return u.get("/api/charts/volatility",r)}static async getMarketSummary(t){const s={symbol:t};return u.get("/api/charts/market-summary",s)}}function jt(){var h;const{selectedPortfolio:a}=O(),[t,s]=w.useState("30d"),{data:i=[]}=k("portfolios",F.getPortfolios),r=a||((h=i[0])==null?void 0:h.id),{data:n,isLoading:c}=k(["portfolioSummary",r],()=>r?F.getPortfolioSummary(r):void 0,{enabled:!!r}),{data:o=[]}=k("recentTrades",()=>C.getTrades(void 0,void 0,10),{refetchInterval:3e4}),{data:l=[]}=k("recentSignals",()=>C.getSignals(void 0,10),{refetchInterval:3e4}),{data:d=[]}=k("chartFiles",I.listChartFiles),{data:m}=k(["portfolioPerformance",r,t],()=>r?F.getPortfolioPerformance(r):null,{enabled:!!r});return c?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading dashboard..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Trading Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Overview of your trading performance and market activity"})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-lg p-1",children:["1d","7d","30d","90d"].map(b=>e.jsx("button",{onClick:()=>s(b),className:`px-3 py-1 text-sm font-medium rounded transition-colors ${t===b?"bg-white dark:bg-gray-700 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:b.toUpperCase()},b))})})]}),n&&n.portfolio&&n.value&&e.jsx(ye,{summary:{current_balance:n.value.cash_balance,equity:n.value.total_value,total_pnl:n.value.realized_pnl+n.value.unrealized_pnl,unrealized_pnl:n.value.unrealized_pnl,realized_pnl:n.value.realized_pnl,open_trades:0,total_trades:n.portfolio.total_trades,win_rate:n.portfolio.winning_trades/n.portfolio.total_trades*100,return_percentage:n.totalReturn,max_drawdown:n.portfolio.max_drawdown}}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[m&&e.jsx(pt,{performance:m,timeRange:t}),e.jsx(ut,{trades:o,signals:l})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(gt,{availableCharts:d}),e.jsx(yt,{}),e.jsxs(f,{className:"p-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-3",children:"System Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"API Connection"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Connected"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Data Feed"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm text-green-600 dark:text-green-400",children:"Live"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Trading Engine"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-2 w-2 bg-yellow-500 rounded-full"}),e.jsx("span",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Standby"})]})]})]})]})]})]})]})}const G=w.forwardRef(({className:a,variant:t="default",size:s="md",...i},r)=>e.jsx("select",{ref:r,className:Oe("rounded-md border border-gray-300 bg-white px-3 py-2 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",{"h-8 px-2 text-xs":s==="sm","h-10 px-3 text-sm":s==="md","h-12 px-4 text-base":s==="lg","border-gray-300":t==="default","border-gray-300 bg-transparent":t==="outline"},a),...i}));G.displayName="Select";const se={"1min":"1 Minute","5min":"5 Minutes","15min":"15 Minutes","1h":"1 Hour","4h":"4 Hours","12h":"12 Hours","1d":"1 Day","1w":"1 Week"};function vt({selectedInterval:a,onIntervalChange:t,availableIntervals:s,selectedFile:i,onFileChange:r,availableFiles:n,onRefresh:c,onDownload:o,loading:l=!1}){const d=m=>m.replace(".json","").replace(/_/g," ").replace(/-/g," ").split(" ").map(h=>h.charAt(0).toUpperCase()+h.slice(1)).join(" ");return e.jsxs("div",{className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0 lg:space-x-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[e.jsx("div",{className:"min-w-0 flex-1",children:e.jsxs(G,{value:i||"",onChange:m=>r(m.target.value),children:[e.jsx("option",{value:"",children:"Select a chart file..."}),n.map(m=>e.jsx("option",{value:m,children:d(m)},m))]})}),e.jsx("div",{className:"min-w-0 flex-1",children:e.jsx(G,{value:a,onChange:m=>t(m.target.value),disabled:!i,children:s.map(m=>e.jsx("option",{value:m,children:se[m]||m},m))})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:c,disabled:l,icon:e.jsx(le,{className:`h-4 w-4 ${l?"animate-spin":""}`}),children:"Refresh"}),e.jsx(S,{variant:"outline",size:"sm",onClick:o,icon:e.jsx(ie,{className:"h-4 w-4"}),children:"Download Data"}),e.jsx(S,{variant:"outline",size:"sm",icon:e.jsx(J,{className:"h-4 w-4"}),children:"Chart Settings"})]})]}),i&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsxs("span",{children:["File: ",d(i)]})]}),e.jsx("div",{className:"flex items-center space-x-1",children:e.jsxs("span",{children:["Interval: ",se[a]||a]})})]})})]})}ce.register(oe,de,We,xe,me,he,qe,Ge);function bt({data:a,height:t=400,showVolume:s=!1,overlays:i={},signals:r=[]}){const n=w.useRef(null),[c,o]=w.useState(null);w.useEffect(()=>{if(!a.candles||a.candles.length===0)return;const d=a.candles.map(h=>({x:new Date(h.timestamp).getTime(),o:h.open,h:h.high,l:h.low,c:h.close,v:h.volume||0})),m=[{label:a.metadata.asset_name,data:d,type:"candlestick",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,color:{up:"#22c55e",down:"#ef4444",unchanged:"#6b7280"}}];if(i.high_20&&m.push({label:"20-Day High",data:d.map(h=>({x:h.x,y:i.high_20})),type:"line",borderColor:"#3b82f6",borderDash:[5,5],borderWidth:1,pointRadius:0,fill:!1}),i.low_20&&m.push({label:"20-Day Low",data:d.map(h=>({x:h.x,y:i.low_20})),type:"line",borderColor:"#3b82f6",borderDash:[5,5],borderWidth:1,pointRadius:0,fill:!1}),i.high_55&&m.push({label:"55-Day High",data:d.map(h=>({x:h.x,y:i.high_55})),type:"line",borderColor:"#ef4444",borderDash:[2,2],borderWidth:1,pointRadius:0,fill:!1}),i.low_55&&m.push({label:"55-Day Low",data:d.map(h=>({x:h.x,y:i.low_55})),type:"line",borderColor:"#ef4444",borderDash:[2,2],borderWidth:1,pointRadius:0,fill:!1}),r.length>0){const h=r.filter(v=>v.type==="buy").map(v=>({x:new Date(v.timestamp).getTime(),y:v.price})),b=r.filter(v=>v.type==="sell").map(v=>({x:new Date(v.timestamp).getTime(),y:v.price}));h.length>0&&m.push({label:"Buy Signals",data:h,type:"scatter",backgroundColor:"#22c55e",borderColor:"#16a34a",pointRadius:6,pointHoverRadius:8,showLine:!1}),b.length>0&&m.push({label:"Sell Signals",data:b,type:"scatter",backgroundColor:"#ef4444",borderColor:"#dc2626",pointRadius:6,pointHoverRadius:8,showLine:!1})}s&&m.push({label:"Volume",data:d.map(h=>({x:h.x,y:h.v})),type:"bar",backgroundColor:"rgba(156, 163, 175, 0.3)",borderColor:"rgba(156, 163, 175, 0.8)",borderWidth:1,yAxisID:"volume",order:1}),o({datasets:m})},[a,i,r,s]);const l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{title:{display:!0,text:`${a.metadata.asset_name} (${a.metadata.currency}) - ${a.metadata.period_duration}`,font:{size:16,weight:"bold"}},legend:{display:!0,position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:d=>new Date(d[0].parsed.x).toLocaleString(),label:d=>{const m=d.dataset;if(m.type==="candlestick"){const h=d.raw;return[`Open: ${h.o.toFixed(2)}`,`High: ${h.h.toFixed(2)}`,`Low: ${h.l.toFixed(2)}`,`Close: ${h.c.toFixed(2)}`,`Volume: ${h.v.toLocaleString()}`]}return`${m.label}: ${d.parsed.y.toFixed(2)}`}}}},scales:{x:{type:"time",time:{displayFormats:{minute:"HH:mm",hour:"MMM dd HH:mm",day:"MMM dd",week:"MMM dd",month:"MMM yyyy"}},title:{display:!0,text:"Time"}},y:{type:"linear",position:"right",title:{display:!0,text:`Price (${a.metadata.currency})`}},...s&&{volume:{type:"linear",position:"left",title:{display:!0,text:"Volume"},grid:{display:!1}}}}};return c?e.jsx("div",{className:"chart-container",style:{height:`${t}px`},children:e.jsx(Qe,{ref:n,type:"candlestick",data:c,options:l})}):e.jsxs("div",{className:"chart-container flex items-center justify-center",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading chart..."})]})}function Nt(){const{selectedChartFile:a,selectedInterval:t,setSelectedChartFile:s,setSelectedInterval:i}=nt(),[r,n]=w.useState(null),[c,o]=w.useState(null),{data:l=[],isLoading:d,refetch:m}=k("chartFiles",I.listChartFiles,{onError:x=>{M.error("Failed to load chart files"),console.error("Chart files error:",x)}}),{isLoading:h,refetch:b}=k(["chartData",a],()=>a?I.getChartData(a):null,{enabled:!!a,onSuccess:x=>{x&&(n(x),I.getChartStats(a).then(o))},onError:x=>{M.error("Failed to load chart data"),console.error("Chart data error:",x)}}),v=()=>{if(!r)return["1d"];const x=r.metadata.period_duration,j=["1min","5min","15min","1h","4h","12h","1d","1w"],P=j.indexOf(x);return P>=0?j.slice(P):j},_=x=>{x&&s(x)},y=x=>{i(x),r&&x!==r.metadata.period_duration&&I.resampleChartData(a,x).then(j=>{n({...j,metadata:{...j.metadata,period_duration:x}})}).catch(j=>{M.error("Failed to resample chart data"),console.error("Resample error:",j)})},p=()=>{m(),a&&b()},N=()=>{M("Download functionality will be implemented")};w.useEffect(()=>{l.length>0&&!a&&s(l[0])},[l,a,s]);const g=d||h;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Charts"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Interactive candlestick charts with trading analysis"})]}),e.jsx(vt,{selectedInterval:t,onIntervalChange:y,availableIntervals:v(),selectedFile:a,onFileChange:_,availableFiles:l,onRefresh:p,onDownload:N,loading:g}),c&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(E,{title:"Price Range",value:`${c.priceStats.min.toFixed(2)} - ${c.priceStats.max.toFixed(2)}`,subtitle:r==null?void 0:r.metadata.currency,icon:e.jsx(z,{className:"h-4 w-4"})}),e.jsx(E,{title:"Price Change",value:`${c.priceStats.change.toFixed(2)}`,change:c.priceStats.changePercent,changeType:"percentage",valueColor:c.priceStats.change>=0?"positive":"negative",icon:e.jsx(R,{className:"h-4 w-4"})}),e.jsx(E,{title:"Total Candles",value:c.totalCandles.toLocaleString(),subtitle:`${t} intervals`,icon:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(E,{title:"Avg Volume",value:c.volumeStats.average.toLocaleString(),subtitle:"Per period",icon:e.jsx(Me,{className:"h-4 w-4"})})]}),e.jsx(f,{className:"p-6",children:g?e.jsxs("div",{className:"flex items-center justify-center h-96",children:[e.jsx("div",{className:"spinner"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading chart data..."})]}):r?e.jsx(bt,{data:r,height:500,showVolume:!0}):e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:l.length===0?"No chart files available. Download some data to get started.":"Select a chart file to view the data."})]})})}),r&&e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Chart Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Asset:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:r.metadata.asset_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Currency:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:r.metadata.currency})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Period:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:r.metadata.period_duration})]}),c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Date Range:"}),e.jsxs("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:[new Date(c.dateRange.start).toLocaleDateString()," - ",new Date(c.dateRange.end).toLocaleDateString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Avg Price:"}),e.jsxs("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:[c.priceStats.average.toFixed(2)," ",r.metadata.currency]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Total Volume:"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:c.volumeStats.total.toLocaleString()})]})]})]})]})]})}function wt(){const[a,t]=w.useState(null),[s,i]=w.useState(!1),{data:r=[],isLoading:n}=k("strategies",C.getStrategies),{data:c=[]}=k("trading-signals",()=>C.getSignals()),{data:o=[]}=k("trades",()=>C.getTrades()),l=async()=>{if(a)try{s?await C.stopAutoTrading():await C.startAutoTrading(),i(!s)}catch(d){console.error("Error toggling auto trading:",d)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Trading"}),e.jsx(S,{onClick:l,disabled:!a,variant:s?"destructive":"default",children:s?"Stop Auto Trading":"Start Auto Trading"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Strategy Selection"}),n?e.jsx("div",{children:"Loading strategies..."}):e.jsx("div",{className:"space-y-2",children:r.map(d=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer ${a===d.name?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"}`,onClick:()=>t(d.name),children:[e.jsx("div",{className:"font-medium",children:d.name}),d.description&&e.jsx("div",{className:"text-sm text-gray-600",children:d.description})]},d.name))})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Signals"}),e.jsx("div",{className:"space-y-3",children:c.slice(0,5).map(d=>e.jsxs("div",{className:"border-l-4 border-blue-500 pl-3",children:[e.jsx("div",{className:"font-medium",children:d.symbol}),e.jsxs("div",{className:"text-sm text-gray-600",children:[d.signal_type," - ",d.trade_type]}),e.jsxs("div",{className:"text-sm text-gray-500",children:["$",d.price.toFixed(2)]})]},d.id))})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Active Trades"}),e.jsx("div",{className:"space-y-3",children:o.filter(d=>d.status==="open").slice(0,5).map(d=>e.jsxs("div",{className:"border-l-4 border-green-500 pl-3",children:[e.jsx("div",{className:"font-medium",children:d.symbol}),e.jsxs("div",{className:"text-sm text-gray-600",children:[d.trade_type," - ",d.quantity," units"]}),e.jsxs("div",{className:`text-sm ${d.unrealized_pnl>=0?"text-green-600":"text-red-600"}`,children:["P&L: $",d.unrealized_pnl.toFixed(2)]})]},d.id))})]})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Trade History"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Symbol"}),e.jsx("th",{className:"text-left py-2",children:"Type"}),e.jsx("th",{className:"text-left py-2",children:"Quantity"}),e.jsx("th",{className:"text-left py-2",children:"Entry Price"}),e.jsx("th",{className:"text-left py-2",children:"Exit Price"}),e.jsx("th",{className:"text-left py-2",children:"P&L"}),e.jsx("th",{className:"text-left py-2",children:"Status"})]})}),e.jsx("tbody",{children:o.map(d=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2",children:d.symbol}),e.jsx("td",{className:"py-2",children:d.trade_type}),e.jsx("td",{className:"py-2",children:d.quantity}),e.jsxs("td",{className:"py-2",children:["$",d.entry_price.toFixed(2)]}),e.jsx("td",{className:"py-2",children:d.exit_price?`$${d.exit_price.toFixed(2)}`:"-"}),e.jsxs("td",{className:`py-2 ${d.realized_pnl>=0?"text-green-600":"text-red-600"}`,children:["$",d.realized_pnl.toFixed(2)]}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${d.status==="open"?"bg-green-100 text-green-800":d.status==="closed"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:d.status})})]},d.id))})]})})]})]})}function kt(){const[a,t]=w.useState(null),{data:s=[],isLoading:i}=k("portfolios",F.getPortfolios),{data:r}=k(["portfolio-summary",a],()=>a?F.getPortfolioSummary(a):void 0,{enabled:!!a}),{data:n=[]}=k(["portfolio-positions",a],()=>a?F.getPortfolioPositions(a):Promise.resolve([]),{enabled:!!a});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Portfolio"}),e.jsx(S,{children:"Create Portfolio"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Portfolio Selection"}),i?e.jsx("div",{children:"Loading portfolios..."}):e.jsx("div",{className:"space-y-2",children:s.map(c=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer ${a===c.id?"border-blue-500 bg-blue-50":"border-gray-300 hover:bg-gray-50"}`,onClick:()=>t(c.id),children:[e.jsx("div",{className:"font-medium",children:c.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:["$",c.current_balance.toFixed(2)]}),e.jsxs("div",{className:`text-sm ${c.total_pnl>=0?"text-green-600":"text-red-600"}`,children:[c.total_pnl>=0?"+":"","$",c.total_pnl.toFixed(2)]})]},c.id))})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[a&&r&&r.portfolio&&r.value&&e.jsxs(e.Fragment,{children:[e.jsx(ye,{summary:{current_balance:r.value.cash_balance,equity:r.value.total_value,total_pnl:r.value.realized_pnl+r.value.unrealized_pnl,unrealized_pnl:r.value.unrealized_pnl,realized_pnl:r.value.realized_pnl,open_trades:0,total_trades:r.portfolio.total_trades,win_rate:r.portfolio.winning_trades/r.portfolio.total_trades*100,return_percentage:r.totalReturn,max_drawdown:r.portfolio.max_drawdown}}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Open Positions"}),n.length===0?e.jsx("div",{className:"text-gray-500 text-center py-8",children:"No open positions"}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Symbol"}),e.jsx("th",{className:"text-left py-2",children:"Side"}),e.jsx("th",{className:"text-left py-2",children:"Positions"}),e.jsx("th",{className:"text-left py-2",children:"Units"}),e.jsx("th",{className:"text-left py-2",children:"Avg Price"}),e.jsx("th",{className:"text-left py-2",children:"Unrealized P&L"})]})}),e.jsx("tbody",{children:n.map(c=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 font-medium",children:c.symbol}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${c.side==="long"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:c.side})}),e.jsx("td",{className:"py-2",children:c.open_positions}),e.jsx("td",{className:"py-2",children:c.total_units}),e.jsxs("td",{className:"py-2",children:["$",c.average_price.toFixed(2)]}),e.jsxs("td",{className:`py-2 ${c.unrealized_pnl>=0?"text-green-600":"text-red-600"}`,children:[c.unrealized_pnl>=0?"+":"","$",c.unrealized_pnl.toFixed(2)]})]},c.symbol))})]})})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Portfolio Details"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Trades"}),e.jsx("div",{className:"text-lg font-semibold",children:r.portfolio.total_trades})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Win Rate"}),e.jsxs("div",{className:"text-lg font-semibold",children:[(r.portfolio.winning_trades/r.portfolio.total_trades*100).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Return"}),e.jsxs("div",{className:`text-lg font-semibold ${r.totalReturn>=0?"text-green-600":"text-red-600"}`,children:[r.totalReturn>=0?"+":"",r.totalReturn.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Max Drawdown"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:[r.portfolio.max_drawdown.toFixed(2),"%"]})]})]})]})]}),!a&&e.jsx(f,{className:"p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"Select a portfolio to view details"}),e.jsx(S,{children:"Create New Portfolio"})]})})]})]})]})}function St(){var m,h,b,v,_,y,p,N,g;const[a,t]=w.useState(null),[s,i]=w.useState({symbol:"BTCUSDT",startDate:"",endDate:"",initialBalance:1e4}),{data:r=[],isLoading:n,refetch:c}=k("strategies",C.getStrategies),{data:o=[]}=k(["backtest-results",a],()=>a?C.getBacktestResults(a):Promise.resolve([]),{enabled:!!a}),l=async()=>{if(a)try{await C.runBacktest({strategy_name:a,symbol:s.symbol,start_date:s.startDate,end_date:s.endDate,initial_balance:s.initialBalance}),c()}catch(x){console.error("Error running backtest:",x)}},d=async(x,j)=>{try{j?await C.activateStrategy(x):await C.deactivateStrategy(x),c()}catch(P){console.error("Error updating strategy status:",P)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Strategies"}),e.jsx(S,{children:"Create Strategy"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Available Strategies"}),n?e.jsx("div",{children:"Loading strategies..."}):e.jsx("div",{className:"space-y-3",children:r.map(x=>e.jsxs("div",{className:`p-4 border rounded-lg ${a===x.name?"border-blue-500 bg-blue-50":"border-gray-300"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"cursor-pointer flex-1",onClick:()=>t(x.name),children:[e.jsx("div",{className:"font-medium",children:x.name}),x.description&&e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:x.description}),x.version&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["v",x.version]})]}),e.jsx(S,{size:"sm",variant:x.is_active?"destructive":"default",onClick:()=>d(x.name,!x.is_active),children:x.is_active?"Deactivate":"Activate"})]}),x.parameters&&e.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded text-xs",children:[e.jsx("div",{className:"font-medium mb-1",children:"Parameters:"}),e.jsx("div",{className:"space-y-1",children:Object.entries(x.parameters).map(([j,P])=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[j,":"]}),e.jsx("span",{children:String(P)})]},j))})]})]},x.name))})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Backtest Configuration"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Symbol"}),e.jsx(D,{value:s.symbol,onChange:x=>i(j=>({...j,symbol:x.target.value})),placeholder:"BTCUSDT"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Start Date"}),e.jsx(D,{type:"date",value:s.startDate,onChange:x=>i(j=>({...j,startDate:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"End Date"}),e.jsx(D,{type:"date",value:s.endDate,onChange:x=>i(j=>({...j,endDate:x.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Initial Balance"}),e.jsx(D,{type:"number",value:s.initialBalance,onChange:x=>i(j=>({...j,initialBalance:Number(x.target.value)}))})]}),e.jsx(S,{onClick:l,disabled:!a,className:"w-full",children:"Run Backtest"})]})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Backtest Results"}),a?o.length===0?e.jsx("div",{className:"text-gray-500",children:"No backtest results available"}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Return"}),e.jsxs("div",{className:`text-lg font-semibold ${(((m=o[0])==null?void 0:m.total_return)??0)>=0?"text-green-600":"text-red-600"}`,children:[(((h=o[0])==null?void 0:h.total_return)??0)>=0?"+":"",(((b=o[0])==null?void 0:b.total_return)??0).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Win Rate"}),e.jsxs("div",{className:"text-lg font-semibold",children:[(((v=o[0])==null?void 0:v.win_rate)??0).toFixed(1),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Trades"}),e.jsx("div",{className:"text-lg font-semibold",children:((_=o[0])==null?void 0:_.total_trades)??0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Max Drawdown"}),e.jsxs("div",{className:"text-lg font-semibold text-red-600",children:[(((y=o[0])==null?void 0:y.max_drawdown)??0).toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Sharpe Ratio"}),e.jsx("div",{className:"text-lg font-semibold",children:(((p=o[0])==null?void 0:p.sharpe_ratio)??0).toFixed(2)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Final Balance"}),e.jsxs("div",{className:"text-lg font-semibold",children:["$",(((N=o[0])==null?void 0:N.final_balance)??0).toLocaleString()]})]})]})}):e.jsx("div",{className:"text-gray-500",children:"Select a strategy to view backtest results"})]})]}),a&&o&&e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Trade Details"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Symbol"}),e.jsx("th",{className:"text-left py-2",children:"Type"}),e.jsx("th",{className:"text-left py-2",children:"Entry"}),e.jsx("th",{className:"text-left py-2",children:"Exit"}),e.jsx("th",{className:"text-left py-2",children:"Quantity"}),e.jsx("th",{className:"text-left py-2",children:"P&L"}),e.jsx("th",{className:"text-left py-2",children:"Return %"})]})}),e.jsx("tbody",{children:(((g=o[0])==null?void 0:g.trades)??[]).slice(0,10).map((x,j)=>{var P,Y,X;return e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2",children:x.symbol||((P=o[0])==null?void 0:P.symbol)||"N/A"}),e.jsx("td",{className:"py-2",children:x.type||"long"}),e.jsxs("td",{className:"py-2",children:["$",((Y=x.entry_price)==null?void 0:Y.toFixed(2))||"N/A"]}),e.jsxs("td",{className:"py-2",children:["$",((X=x.exit_price)==null?void 0:X.toFixed(2))||"N/A"]}),e.jsx("td",{className:"py-2",children:x.quantity||"N/A"}),e.jsxs("td",{className:`py-2 ${(x.pnl||0)>=0?"text-green-600":"text-red-600"}`,children:["$",(x.pnl||0).toFixed(2)]}),e.jsxs("td",{className:`py-2 ${(x.return_pct||0)>=0?"text-green-600":"text-red-600"}`,children:[(x.return_pct||0).toFixed(2),"%"]})]},j)})})]})})]})]})}function _t(){const{darkMode:a}=O(),[t,s]=w.useState({apiUrl:"http://localhost:8000",defaultPortfolio:"",riskPerTrade:2,maxOpenTrades:5,autoTradingEnabled:!1,notifications:{email:!0,browser:!0,tradeExecutions:!0,significantPnL:!0},display:{darkMode:a,compactView:!1,showAdvancedMetrics:!1}}),[i,r]=w.useState(!1);w.useEffect(()=>{const o=localStorage.getItem("turtle-trading-settings");if(o)try{const l=JSON.parse(o);s({...t,...l})}catch(l){console.error("Error loading settings:",l)}},[]);const n=async()=>{r(!0);try{localStorage.setItem("turtle-trading-settings",JSON.stringify(t)),t.display.darkMode!==a&&O.getState().toggleDarkMode(),console.log("Settings saved successfully")}catch(o){console.error("Error saving settings:",o)}finally{r(!1)}},c=()=>{s({apiUrl:"http://localhost:8000",defaultPortfolio:"",riskPerTrade:2,maxOpenTrades:5,autoTradingEnabled:!1,notifications:{email:!0,browser:!0,tradeExecutions:!0,significantPnL:!0},display:{darkMode:!1,compactView:!1,showAdvancedMetrics:!1}})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(S,{variant:"outline",onClick:c,children:"Reset to Defaults"}),e.jsx(S,{onClick:n,disabled:i,children:i?"Saving...":"Save Settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"API Configuration"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"API Base URL"}),e.jsx(D,{value:t.apiUrl,onChange:o=>s(l=>({...l,apiUrl:o.target.value})),placeholder:"http://localhost:8000"})]})})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Trading Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Default Portfolio"}),e.jsx(D,{value:t.defaultPortfolio,onChange:o=>s(l=>({...l,defaultPortfolio:o.target.value})),placeholder:"Enter portfolio ID"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Risk Per Trade (%)"}),e.jsx(D,{type:"number",min:"0.1",max:"10",step:"0.1",value:t.riskPerTrade,onChange:o=>s(l=>({...l,riskPerTrade:Number(o.target.value)}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Max Open Trades"}),e.jsx(D,{type:"number",min:"1",max:"20",value:t.maxOpenTrades,onChange:o=>s(l=>({...l,maxOpenTrades:Number(o.target.value)}))})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"autoTrading",checked:t.autoTradingEnabled,onChange:o=>s(l=>({...l,autoTradingEnabled:o.target.checked})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"autoTrading",className:"text-sm font-medium",children:"Enable Auto Trading"})]})]})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Notifications"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"emailNotifications",checked:t.notifications.email,onChange:o=>s(l=>({...l,notifications:{...l.notifications,email:o.target.checked}})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"emailNotifications",className:"text-sm font-medium",children:"Email Notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"browserNotifications",checked:t.notifications.browser,onChange:o=>s(l=>({...l,notifications:{...l.notifications,browser:o.target.checked}})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"browserNotifications",className:"text-sm font-medium",children:"Browser Notifications"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"tradeExecutions",checked:t.notifications.tradeExecutions,onChange:o=>s(l=>({...l,notifications:{...l.notifications,tradeExecutions:o.target.checked}})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"tradeExecutions",className:"text-sm font-medium",children:"Trade Executions"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"significantPnL",checked:t.notifications.significantPnL,onChange:o=>s(l=>({...l,notifications:{...l.notifications,significantPnL:o.target.checked}})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"significantPnL",className:"text-sm font-medium",children:"Significant P&L Changes"})]})]})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Display Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"darkMode",checked:t.display.darkMode,onChange:o=>s(l=>({...l,display:{...l.display,darkMode:o.target.checked}})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"darkMode",className:"text-sm font-medium",children:"Dark Mode"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"compactView",checked:t.display.compactView,onChange:o=>s(l=>({...l,display:{...l.display,compactView:o.target.checked}})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"compactView",className:"text-sm font-medium",children:"Compact View"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"showAdvancedMetrics",checked:t.display.showAdvancedMetrics,onChange:o=>s(l=>({...l,display:{...l.display,showAdvancedMetrics:o.target.checked}})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"showAdvancedMetrics",className:"text-sm font-medium",children:"Show Advanced Metrics"})]})]})]})]}),e.jsxs(f,{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"System Information"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Frontend Version"}),e.jsx("div",{className:"font-medium",children:"1.0.0"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"API Status"}),e.jsx("div",{className:"font-medium text-green-600",children:"Connected"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Last Updated"}),e.jsx("div",{className:"font-medium",children:new Date().toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-600",children:"Environment"}),e.jsx("div",{className:"font-medium",children:"Development"})]})]})]})]})}function Ct(){const{sidebarOpen:a}=O();return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(ct,{}),e.jsxs("div",{className:"flex h-[calc(100vh-64px)]",children:[e.jsx(dt,{isOpen:a}),e.jsx("main",{className:`flex-1 overflow-auto transition-all duration-300 ${a?"ml-64":"ml-16"}`,children:e.jsx("div",{className:"p-6",children:e.jsxs(Ne,{children:[e.jsx(L,{path:"/",element:e.jsx(jt,{})}),e.jsx(L,{path:"/charts",element:e.jsx(Nt,{})}),e.jsx(L,{path:"/trading",element:e.jsx(wt,{})}),e.jsx(L,{path:"/portfolio",element:e.jsx(kt,{})}),e.jsx(L,{path:"/strategies",element:e.jsx(St,{})}),e.jsx(L,{path:"/settings",element:e.jsx(_t,{})})]})})})]})]})}const Pt=new _e({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:5*60*1e3}}});H.createRoot(document.getElementById("root")).render(e.jsx(we.StrictMode,{children:e.jsxs(Ce,{client:Pt,children:[e.jsxs(ke,{children:[e.jsx(Ct,{}),e.jsx(Ue,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{style:{background:"#10b981"}},error:{style:{background:"#ef4444"}}}})]}),e.jsx(tt.ReactQueryDevtools,{initialIsOpen:!1})]})}));
//# sourceMappingURL=index-3383f5c5.js.map
